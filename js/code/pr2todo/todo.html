<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=\, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
</head>

<body>

    <h1 class="text-center my-5">Welcome to library...</h1>

    <div class="container">
        <form action="">
            <div>
                <label for="">Book Name : </label>
                <input type="text" id="name" required>
            </div>
            <br>
            <div>
                <label for="">Author Name : </label>
                <input type="text" id="author" required>
            </div>
            <br>
            <button class="btn btn-primary" id="btn">Add Book</button>
        </form>
    </div>

    <div class="container my-4">
        <table class="table table-bordered table-primary table-striped table-hover">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Book Name</th>
                    <th>Author Name</th>
                    <th>Availability</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="books-row">

            </tbody>
        </table>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        let library = [
            {
                id: 1,
                name: "Atomic Habits",
                author: "James Clear",
                isAvailable: true,
            },
            {
                id: 2,
                name: "Think Like Monk",
                author: "Jay Shah",
                isAvailable: false
            },
            {
                id: 3,
                name: "Mahabharat",
                author: "Ved Vyas",
                isAvailable: true
            },
            {
                id: 4,
                name: "Ramayan",
                author: "Valmiki",
                isAvailable: false
            },
            {
                id: 5,
                name: "Bhagvad Gita",
                author: "Shree. Krishna",
                isAvailable: true
            },
        ]
        let tBody = document.getElementById("books-row");
        function renderBooks() {
            tBody.innerHTML = "";

            library.forEach((book, idx) => {
                tBody.innerHTML += `
                <tr>
                    <td>${idx + 1}</td>
                    <td>${book.name}</td>
                    <td>${book.author}</td>
                    <td>
                        <span class="badge bg-${book.isAvailable ? "success" : "danger"}">
                            ${book.isAvailable ? "Yes" : "No"}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-danger" onclick="deleteBook(${idx})"> x </button>
                    </td>
                </tr>
            `;
            })
        }
        function deleteBook(bookIdx) {
            Swal.fire({
                title: "Are you sure you want to delete this book ?",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!"
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: "Deleted!",
                        text: "Your book has been deleted.",
                        icon: "success"
                    });

                    library.splice(bookIdx, 1)
                    renderBooks();
                }
            });
        }
        $(document).ready(function () {
            renderBooks();

            $("#btn").on("click", function (e) {
                e.preventDefault();

                let name = document.getElementById("name").value;
                let author = document.getElementById("author").value;

                let obj = {
                    id: Date.now(),
                    name,
                    author,
                    isAvailable: true
                }

                library.push(obj);
                tBody.innerHTML = "";
                renderBooks();
            })
        })
    </script>
</body>

</html>