<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
 <link rel="stylesheet" href="./assets/css/style.css" />

</head>
<body>
      <form action="">
       <h4 class="form-title">Edit Employee</h4>
        <div class="input1">

            <label for="name">Name:-</label>
            <input type="text" id="name">
        </div><br>
        <div class="input1">

            <label for="email">Email:-</label>
            <input type="email" id="email">
        </div><br>
        <div class="input1">

            <label for="salary">Salary:-</label>
            <input type="number" id="salary">
        </div><br>
        <div class="input1">

            <label for="dept">Department</label>
            <select name="dept" id="dept">
                <option value="">Please Select any department  </option>
                <option value="1">MCA</option>
                <option value="2">IT</option>
                <option value="3">DEV</option>
                <option value="4">HR</option>
                <option value="5">SE</option>

            </select>
        </div><br>
        <div class="actions">
        <button class="btn btn-success" id="btn">Update employee</button>
        <a href="./allemployee.html">View All employee</a>
        </div>
        
    </form>
  <script>
    document.addEventListener("DOMContentLoaded",()=>{
        let empid=parseInt(localStorage.getItem("editEmpId"));
    console.log(empid);
    let users=JSON.parse(localStorage.getItem("users"))||[];
    let btn=document.getElementById('btn');
       let updatemployee=users.find((emp)=>{
            return emp.id===empid;

        })
          let name=document.getElementById("name");
        let email=document.getElementById("email");
        let salary=document.getElementById("salary");
        let dept=document.getElementById("dept");
        console.log(updatemployee);
        let updateidx=users.findIndex((emp)=>{
            return emp.id===empid;
        })
        name.value=updatemployee.name;
        email.value=updatemployee.email;
        salary.value=updatemployee.salary;
        dept.value=updatemployee.dept;
 
    btn.addEventListener("click",function(e){
        e.preventDefault();
        users.splice(updateidx,1,{
            id:empid,
            name:name.value,
            email:email.value,  
            salary:salary.value,
            dept:dept.value
        })
        console.log(users);

        localStorage.setItem("users",JSON.stringify(users));
        window.location ="./allemployee.html";
    })
    console.log(users)
    });
  </script>
</body>

</html>
